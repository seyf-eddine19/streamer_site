{% extends "public_site/base.html" %}
{% load static custom_filters %}

{% block title %}Streamer - Home{% endblock %}

{% block content %}
<!--===== HERO SECTION =====-->
<section class="section hero">
  <div class="bg-img hero-image">
    <img src="{{ site_images.hero_bg_1|default:'' }}" alt="Hero Background">
  </div>
  <div class="container">
    <div class="hero-content">
      <h1 class="title">{{ site_content.hero|get_text:'hero_main_title' }}</h1>
      <p>{{ site_content.hero|get_text:'hero_description' }}</p>
      <a class="cta button" href="{% url 'contact' %}">{{ site_content.hero|get_text:'hero_cta_button' }}</a>

      <div class="stats">
        <div>
          <strong>{{ site_content.hero|get_text:'hero_stat_value_1'|default:"300+" }}</strong>
          <span></span>
          <span>{{ site_content.hero|get_text:'hero_stat_label_3'|default:"Unique Style" }}</span>
        </div>
        <div>
          <strong class="highlight">{{ site_content.hero|get_text:'hero_stat_value_2'|default:"200+" }}</strong>
          <span></span>
          <span>{{ site_content.hero|get_text:'hero_stat_label_3'|default:"Project Finished" }}</span>
        </div>
        <div>
          <strong>{{ site_content.hero|get_text:'hero_stat_value_3'|default:"500+" }}</strong>
          <span>{{ site_content.hero|get_text:'hero_stat_label_3'|default:"Happy Customer" }}</span>
        </div>
      </div>

      {% if hero_taglines %}
      <div class="tagline">
        <div class="swiper tagline-swiper tagline-content">
          <div class="swiper-wrapper">
            {% for tagline in hero_taglines %}
              <span class="swiper-slide">
                {% if lang == 'ar' %}
                  {{ tagline.content_ar }}
                {% else %}
                  {{ tagline.content_en }}
                {% endif %}
              </span>
            {% endfor %}
          </div>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
</section>

<!--===== GAMES SECTION =====-->
{% include "public_site/components/games_section.html" %}

<!--===== ABOUT SECTION =====-->
<section class="section about">
  <div class="title-container">
    <div>
      <h4 class="subtitle">{{ site_content.about|get_text:'about_subtitle' }}</h4>
      <h2 class="title">{{ site_content.about|get_text:'about_main_title' }}</h2>
    </div>
    <div>
      <a href="{% url 'about' %}" class="button">
        {% if lang == "ar" %}
          اعرف المزيد <i class='bx bx-left-arrow-alt'></i>
        {% else %}
          Know More <i class='bx bx-right-arrow-alt'></i>
        {% endif %}
      </a>
    </div>
  </div>

  <div class="container about-container">
    <div class="about-image">
      <img src="{{ site_images.about_img|default:'' }}" alt="About Image">
    </div>

    <div class="about-info">
      <div class="intro">
        <div class="about-title">
          <svg width="40" height="40" viewBox="0 0 40 40">
            <path d="M20 0L22.75 17.17L39.5 20L22.75 22.83L20 40L17.24 22.83L0.5 20L17.24 17.17L20 0Z" fill="#603E82"/>
          </svg>
          <h3>{% if lang == 'ar' %}مقدمة{% else %}Introduction{% endif %}</h3>
        </div>
        <p>{{ site_content.about|get_text:'about_intro_p' }}</p>
      </div>

      <div class="contact">
        <div class="hr"></div>
        <div class="about-title">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 0L22.7577 17.1716L39.5 20L22.7577 22.8284L20 40L17.2423 22.8284L0.5 20L17.2423 17.1716L20 0Z" fill="#603E82"/>
          </svg>
          <h3>{% if lang == 'ar' %}معلومات التواصل{% else %}Contact Information{% endif %}</h3>
        </div>

        <div class="info-wrapper">
          <div class="info-item">
            <span class="info-label">{% if lang == 'ar' %}البريد الإلكتروني{% else %}Email{% endif %}</span>
            <a class="info-value" href="mailto:{{ site_content.about|get_text:'about_contact_email' }}">{{ site_content.about|get_text:'about_contact_email' }}<span>↗</span></a>
          </div>
          <div class="info-item">
            <span class="info-label">{% if lang == 'ar' %}رقم الهاتف{% else %}Phone Number{% endif %}</span>
            <a class="info-value" href="tel:{{ site_content.about|get_text:'about_contact_phone' }}">{{ site_content.about|get_text:'about_contact_phone' }}<span>↗</span></a>
          </div>
        </div>

        <div class="social-wrapper">
          <div class="social-icons">
            <a href="{{ site_content.about|get_text:'social_facebook' }}"><i class='bx bxl-facebook-circle'></i></a>
            <a href="{{ site_content.about|get_text:'social_youtube' }}"><i class="bx bxl-youtube"></i></a>
            <a href="{{ site_content.about|get_text:'social_tiktok' }}"><i class="bx bxl-tiktok"></i></a>
          </div>
          <a href="{% url 'about' %}" class="button">{{ site_content.about|get_text:'about_cta_button' }}</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!--===== FEATURES SECTION =====-->
{% include "public_site/components/features_section.html" %}

<!--===== VIDEO SECTION =====-->
<section class="section">
  <h2 class="video-title">{{ site_content.about|get_text:'video_title'|safe }}</h2>

  <div class="container video-container video-wrapper">
    <!-- معاينة الفيديو -->
    <div class="video-iframe">
      <div
        class="video-preview"
        style="width:100%; max-width:640px; height:400px; overflow: hidden; margin:auto;"
        role="button"
        tabindex="0"
        aria-label="Play video"
        onclick="loadYoutubeIframe()"
        onkeypress="if(event.key === 'Enter'){ loadYoutubeIframe(); }">
        <img
          src="{{ site_images.about_video_preview|default:'' }}"
          alt="Video preview"
          loading="lazy"
          style="object-fit: cover;"/>
        <div
          class="play-button"
          aria-hidden="true"
          style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            border-radius: 50%;
            padding: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
          "
        >
          <i class="bx bx-play" style="font-size: 2.5rem; color: var(--first-color);"></i>
      </div>
      </div>
      <div id="video-box" style="display:none; height:400px;" aria-hidden="true"></div>
    </div>
  </div>

  <script>
    function loadYoutubeIframe() {
      const preview = document.querySelector('.video-preview');
      const iframeBox = document.getElementById('video-box');

      preview.style.display = 'none';
      iframeBox.style.display = 'block';
      iframeBox.setAttribute('aria-hidden', 'false');

      // Replace the iframe with autoplay enabled
      const iframeHTML = `{{ site_content.about|get_text:'video_youtube_iframe'|safe }}`;
      const iframeWithAutoplay = iframeHTML.replace(
        /src="([^"]+)"/,
        'src="$1&autoplay=1" allow="autoplay"'
      );
      iframeBox.innerHTML = iframeWithAutoplay;
    }
  </script>
</section>


<!--===== PROJECTS SECTION =====-->
{% include "public_site/components/projects_section.html" %}

<!--===== FAQ SECTION =====-->
{% include "public_site/components/faq_section.html" %}

<!--===== TESTIMONIALS SECTION =====-->
{% include "public_site/components/testimonials_section.html" %}

<!--===== CLIENTS SECTION =====-->
{% if client_logos %}
<section class="section clients">
  <div>
    <h2 class="title">{{ site_content.clients|get_text:'clients_title'|safe }}</h2>
    <h4 class="subtitle-2">{{ site_content.clients|get_text:'clients_description'|safe }}</h4>
  </div>
  {% include "public_site/components/client_swiper.html" %}
</section>
{% endif %}
{% endblock %}

{% block scripts %}
<script src="{% static 'public_site/js/tagline_swiper.js' %}"></script>
<script src="{% static 'public_site/js/games_swiper.js' %}"></script>
<script src="{% static 'public_site/js/projects_swipers.js' %}"></script>
<script src="{% static 'public_site/js/faq_section.js' %}"></script>
<script src="{% static 'public_site/js/testimonial_swiper.js' %}"></script>
<script src="{% static 'public_site/js/client_swiper.js' %}"></script>
{% endblock scripts %}
