{% extends "public_site/base.html" %}
{% load static custom_filters %}

{% block title %}Projects by Category{% endblock %}

{% block content %}
{% if projects %}
<section class="section projects" style="margin-top: 8rem;">
  <div class="title-container">
    <div>
      <h4 class="subtitle">{{ site_content.projects|get_text:'projects_subtitle'|safe }}</h4>
      <h2 class="title">{{ site_content.projects|get_text:'projects_title'|safe }}</h2>
      <h3 class="title is-4">
        {% if lang == "ar" %}{{ current_category.name_ar }}{% else %}{{ current_category.name_en }}{% endif %}
      </h3>
    </div>
  </div>
  <div class="flex-container container">
        {% for project in projects %}
        <div class="project-card">
          <div class="project-img">
            <img src="{{ project.image.url }}" alt="Project" />
          </div>
          <div class="project-info">
            <h5 class="project-name">
              {% if lang == 'ar' %}
                {{ project.title_ar }}
              {% else %}
                {{ project.title_en }}
              {% endif %}
            </h5>
            <p class="project-date">{{ project.date|date:"F Y" }}</p>
          </div>
        </div>
        {% empty %}
          <div class="column is-12 has-text-centered">
            <p class="has-text-grey">
              {% if lang == "ar" %}لا توجد مشاريع حالياً.{% else %}No projects found.{% endif %}
            </p>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>
{% endif %}

{% endblock %}
